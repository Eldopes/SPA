
@{
    ViewBag.Title = "Angular SPA";
}

@Styles.Render("~/Content/Index/Index.css")

@Scripts.Render("~/Scripts/jquery-1.10.2.min.js")
@Scripts.Render("~/Scripts/angular.min.js")

<html ng-app="userApp">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
</head>
<body ng-controller="userController">
    <div class="page-header">
        <h1> Users & Departments</h1>
    </div>
    <div class="panel">

        <table class="table table-striped">
            <thead>
                <tr>
                    <th>User ID</th>
                    <th>User Name</th>
                    <th>Department</th>
                    <th>Department ID</th>             
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="user in list.users">
                    <td>--</td>
                    <td>{{user.userName}}</td>
                    <td>{{user.department}}</td>
                    <td>--</td>
                </tr>
            </tbody>
        </table>

        <div class="form-inline"> <!--Form for adding new user-->            
            <div class="form-group">
                <div class="col-md-6">
                    <input class="form-control" ng-model="usr" placeholder="UserName" />
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-8">
                    <input class="form-control" ng-model="dpt" placeholder="Department" />
                </div>
            </div>
           
            <div class="form-group">
                <div class="col-md-offset-2 col-md-8">
                    <button class="btn btn-success" ng-click="addItem(usr, dpt)">Add new</button>
                </div>
            </div>
        </div>  
    </div>



    <script>
        // ANGULAR DATA MODEL VARIABLE
var model = {
    users: [
        { userName: "Хлеб", department: 15.9 },
        { userName: "Масло", department: 6 }
    ]
};

        // ANGULAR CONTROLLER 
var userApp = angular.module("userApp", []); // separate module contains all our SPA - data 

userApp.controller("userController", function ($scope) { // $scope object is for passing data from controller to view
    $scope.list = model; // binding $scope object to model
    $scope.addItem = function (usr, dpt) {
        if ((usr != "") && (dpt != "")) // если текст установлен, то добавляем
        {
            $scope.list.users.push({ userName: usr, department: dpt});
        }
    }
});

    </script>

</body>
</html>




